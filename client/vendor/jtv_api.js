var jtv_api=function(){var g={},s=!!(document.all&&!window.opera),h=function(b,a){for(var d in b)b.hasOwnProperty(d)&&a(d,b[d])},n=function(b,a){for(var d=b.length,c=0;c<d;c++)a(b[c],c)},t=function(b,a){if(b.indexOf)return b.indexOf(a)!=-1;else{for(var d=b.length,c=0;c<d;c++)if(b[c]==a)return true;return false}},o=function(b,a){var d={};h(b,function(c,e){if(t(a,c))d[c]=e});return d},u=function(b){var a=[];h(b,function(d,c){a.push(d+"="+c)});return a.join("&")},q=function(b){var a={};n(b.split("&"),
function(d){d=d.split("=");var c=d[1];a[d[0]]=c.indexOf('"')!=-1?c.split('"')[1]:c});return a},p=function(b,a){var d={};h(b,function(c,e){d[c]=e});h(a,function(c,e){d[c]=e});return d},v=function(){for(var b=[],a=0;a<20;a++)b.push("abcdefghujklmnopqrstuvwxyz".charAt(Math.random()*26));b=b.join("");return document.getElementById(b)?v():b},m=function(b,a,d){b&&b[a]?b[a].apply(b,Array.prototype.slice.call(arguments).slice(2)):window.setTimeout(function(){m(b,a,d)},10)},w=function(b,a){typeof b!="undefined"&&
b!==null?a(b):window.setTimeout(function(){w.apply(this,arguments)},10)},x=function(b,a){b()?a():window.setTimeout(function(){x(b,a)},10)};g.javascript_callbacks=[];var y=function(b){return function(a,d){return b[a](a,d)}},r=function(b){if(s){var a=[],d=document.getElementsByTagName("*");n(d,function(c){c.getAttribute("name")==b&&a.push(c)});return a}else return document.getElementsByName(b)},z=function(b,a,d,c,e){d=u(d);b=typeof b=="string"?document.getElementById(b):b;var f=p({allowScriptAccess:"always",
allowNetworking:"all",allowFullscreen:"true"},c);c=null;if("id"in e){c=e.id;delete e.id}else c=v();if("flashvars"in f)f.flashvars+="&"+d;else f.flashvars=d;if(s){var j="<object";e.codebase="http://macromedia.com/cabs/swflash.cab#version=6,0,0,0";e.classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000";e.type="application/x-swf";e.id=c;h(e,function(k,l){j+=" "+k+'="'+l+'"'});j+=" >";f.data=a;f.movie=a;h(f,function(k,l){j+='<param name="'+k+'" value="'+l+'">'});j+="</object>";a=document.createElement("div");
b.appendChild(a);a.innerHTML+=j;return document.getElementById(c)}else{var i=document.createElement("embed");i.setAttribute("pluginspage","http://www.macromedia.com/go/getflashplayer");i.setAttribute("src",a);i.setAttribute("type","application/x-swf");i.setAttribute("name",c);h(f,function(k,l){i.setAttribute(k,l)});h(e,function(k,l){i.setAttribute(k,l)});b.appendChild(i);return i}};g.new_player=function(b,a){var d=null;d=a.custom?"http://www-cdn.jtvnw.net/widgets/live_api_player.swf?channel="+a.channel:
"http://www-cdn.jtvnw.net/widgets/live_embed_player.swf?channel="+a.channel;if(a.clip)a.custom=true;var c=p({start_volume:"26",watermark_position:"top_right",auto_play:"false"},o(a,["channel","start_volume","watermark_position","auto_play","namespace","consumer_key","publisher_guard"])),e=p({height:"295",width:"353",bgcolor:"#000000"},o(a,["width","height","id","class","name","title","bgcolor","style"]));if(a.custom){c.enable_javascript=true;if(a.events){c.javascript_callback_path="jtv_api.javascript_callbacks["+
g.javascript_callbacks.length+"]";g.javascript_callbacks.push(y(a.events))}}var f=z(b,d,c,{},e);if(a.custom){"buffer_time"in a&&m(f,"set_buffer_time",a.buffer_time);a.publisher_guard&&m(f,"set_channel_password",a.publisher_guard);if(a.clip){w(f,function(){f.play_live=f.play_clip});a.auto_play&&m(f,"play_clip",a.channel)}else if(a.auto_play)a.namespace?m(f,"play_live",a.channel,a.namespace):m(f,"play_live",a.channel)}return f};g.new_broadcaster=function(b,a){var d={javascript_callback_path:"jtv_api.javascript_callbacks["+
g.javascript_callbacks.length+"]"};g.javascript_callbacks.push(y(a.events));return z(b,"http://www-cdn.jtvnw.net/widgets/live_embed_publisher.swf",o(a,["stream_key","consumer_key","namespace"]),d,p({},o(a,["height","width","bgcolor","id","name","title","style"])))};g.new_chat=function(b,a){var d=["channel","hide_chat","default_chat","tweet_suffix","over18"],c=u(o(a,d)),e=document.createElement("iframe");e.setAttribute("src","http://www.justin.tv/chat/embed?"+c);c={width:"320",height:"450"};h(a,function(f){t(d,
f)&&delete a[f]});c=p(c,a);h(c,function(f,j){e.setAttribute(f,j)});(typeof b=="string"?document.getElementById(b):b).appendChild(e);return e};(function(b){if(window.addEventListener)window.addEventListener("DOMContentLoaded",b,false);else document.attchEvent?document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){b();document.detachEvent("onreadystatechange",arguments.callee)}}):x(function(){try{document.documentElement.doScroll("left");return document.documentElement.doScroll&&
window==window.top}catch(a){return false}},b)})(function(){n(r("jtv_api.new_player"),function(b){var a=q(b.getAttribute("title"));g.new_player(b,a)});n(r("jtv_api.new_chat"),function(b){var a=q(b.getAttribute("title"));g.new_chat(b,a)});n(r("jtv_api.new_broadcaster"),function(b){var a=q(b.getAttribute("title"));g.new_broadcaster(b,a)})});return g}();
